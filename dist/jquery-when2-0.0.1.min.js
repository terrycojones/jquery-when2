/*! jquery-when2 Version 0.0.1 27-07-2013 */
jQuery.when2=function(a,b){for(var c=0,d=[].slice,e=a?d.call(a):[],f=e.length,g=f?new Array(f):window,h=f,i=0,j=b&&b.resolveOnFirstSuccess,k=!b||b.failOnFirstError,l=jQuery.Deferred(),m=function(a){return function(b){"pending"===l.state()&&(--h,g[a]=this,e[a]=arguments.length>1?d.call(arguments):b,j?l.resolveWith(this,[a,e[a]]):0===h&&l.resolveWith(g,e))}},n=function(a){return k?function(b){"pending"===l.state()&&(b=arguments.length>1?d.call(arguments):b,l.rejectWith(this,[a,b]))}:function(b){"pending"===l.state()&&(g[a]=this,e[a]=arguments.length>1?d.call(arguments):b,--h||l.resolveWith(g,e))}},o=function(a){return function(b){"pending"===l.state()&&(b=arguments.length>1?d.call(arguments):b,l.notifyWith(this,[a,b]))}};f>c;c++)e[c]&&jQuery.isFunction(e[c].promise)?(i++,e[c].promise().done(m(c)).fail(n(c)).progress(o(c))):("pending"===l.state()&&j&&l.resolveWith(window,[c,e[c]]),g[c]=window,--h);return"pending"===l.state()&&0===i&&l.resolveWith(g,e),l.promise()};